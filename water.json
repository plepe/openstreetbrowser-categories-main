{
    "type": "overpass",
    "name": {
        "de": "Gewässer",
        "en": "Waterbodies",
        "fr": "Hydrographie",
        "hu": "Vizek",
        "pt": "Massas de água",
        "pt-br": "Hidrografia"
    },
    "query": {
        "10": [
            "(",
            "way[waterway~\"^(river|canal)$\"];",
            "nwr[natural~\"^(divide|bay|strait)$\"];",
            "way[natural=water][water~\"^(lake|lagoon|reservoir|canal)$\"];",
            "relation[natural=water][type=multipolygon][water~\"^(lake|lagoon|reservoir|canal)$\"];",
            ")"
        ],
        "13": [
            "(",
            "nwr[natural~\"^(water|divide|bay|strait|spring|hot_spring|geyser)$\"];",
            "relation[type=multipolygon][natural=water];",
            "relation[type=multipolygon][waterway=riverbank];",
            "nwr[waterway];",
            ")"
        ]
    },
    "feature": {
        "pre": [
            "{% if tags.waterway %}",
            "  {% set key = 'waterway' %}",
            "  {% set value = tags.waterway %}",
            "{% elseif tags.water %}",
            "  {% set key = 'water' %}",
            "  {% set value = tags.water %}",
            "{% elseif tags.natural %}",
            "  {% set key = 'natural' %}",
            "  {% set value = tags.natural %}",
            "{% endif %}",
            "{% set kv = key ~ '=' ~ value %}"
        ],
        "description": [
            "{{ tagTrans(key, value) }}"
        ],
        "markerSign": [
            "{{ const[kv].sign|raw }}"
        ],
        "markerSymbol": [
            "{% if const[kv].symbol == 'pointer' %}",
            "{{ markerPointer({ fillColor: '#3388ff' })|raw }}",
            "{% endif %}"
        ],
        "listMarkerSymbol": [
            "{% if const[kv].symbol == 'pointer' %}",
            "{{ markerCircle({ fillColor: '#3388ff' })|raw }}",
            "{% elseif tags.natural == 'water' %}",
            "polygon",
            "{% else %}",
            "line",
            "{% endif %}"
        ],
        "priority": [
            "{% if tags.natural == 'divide' %}",
            "0",
            "{% elseif tags.natural == 'water' and tags.water in ['lake', 'lagoon', 'reservoir', 'canal'] %}",
            "0",
            "{% elseif tags.waterway == 'river' %}",
            "1",
            "{% elseif tags.waterway == 'stream' or tags.waterway == 'drain' %}",
            "3",
            "{% elseif tags.waterway == 'ditch' %}",
            "5",
            "{% else %}",
            "2",
            "{% endif %}"
        ],
        "style": {
            "width": [
                "{% if tags.waterway == 'river' %}",
                "4",
                "{% elseif tags.waterway == 'stream' or tags.waterway == 'drain' %}",
                "2",
                "{% elseif tags.waterway == 'ditch' %}",
                "1",
                "{% else %}",
                "3",
                "{% endif %}"
            ],
            "color": [
                "{% if tags.natural == 'divide' %}",
                "#ff0000",
                "{% elseif tags.waterway in [ 'dam', 'weir' ] %}",
                "#000000",
                "{% else %}",
                "#3388ff",
                "{% endif %}"
            ],
            "text": [
                "{% if type=='way' and tags.waterway in [ 'river', 'stream', 'canal', 'ditch', 'wadi', 'drystream', 'drain' ] %}",
                "{{ tags.name }}   ➔   ",
                "{% endif %}"
            ],
            "textRepeat": "1"
        }
    },
    "const": {
        "natural=spring": {
            "sign": "<i class='fas fa-water'></i>",
            "symbol": "pointer"
        },
        "natural=hot_spring": {
            "sign": "<i style='color: orange;' class='fas fa-water'></i>",
            "symbol": "pointer"
        },
        "natural=geyser": {
            "sign": "<i style='color: red;' class='fas fa-water'></i>",
            "symbol": "pointer"
        },
        "waterway=waterfall": {
            "sign": "<img data-src='maki:waterfall'>",
            "symbol": "pointer"
        }
    },
    "info": [
        "<table>",
        "  <tr>",
        "    <td>{{ markerPolygon(evaluate({ \"natural\": \"water\" }))|raw }}</td>",
        "    <td>{{ tagTrans('natural', 'water') }}</td>",
        "  </tr>",
        "  <tr>",
        "    <td>{{ markerLine(evaluate({ \"waterway\": \"river\" }))|raw }}</td>",
        "    <td>{{ tagTrans('waterway', 'river') }},",
        " {{ tagTrans('waterway', 'canal') }}</td>",
        "  </tr>",
        "{% if map.zoom >= 13 %}",
        "  <tr>",
        "    <td>{{ markerLine(evaluate({ \"waterway\": \"stream\" }))|raw }}</td>",
        "    <td>{{ tagTrans('waterway', 'stream') }}, {{ tagTrans('waterway', 'drain') }}</td>",
        "  </tr>",
        "  <tr>",
        "    <td>{{ markerLine(evaluate({ \"waterway\": \"ditch\" }))|raw }}</td>",
        "    <td>{{ tagTrans('waterway', 'ditch') }}</td>",
        "  </tr>",
        "  <tr>",
        "    <td>{{ markerLine(evaluate({ \"waterway\": \"dam\" }))|raw }}</td>",
        "    <td>{{ tagTrans('waterway', 'dam') }}, {{ tagTrans('waterway', 'weir') }}</td>",
        "  </tr>",
        "  {% for k, data in const %}",
        "    <tr>",
        "      <td>{{ markerCircle({ fillColor: '#3388ff' })|raw }}<div class='sign'>{{ data.sign|raw }}</div></td>",
        "      <td>{{ tagTrans(k) }}</td>",
        "    </tr>",
        "  {% endfor %}",
        "{% endif %}",
        "  <tr>",
        "    <td>{{ markerLine(evaluate({ \"natural\": \"divide\" }))|raw }}</td>",
        "    <td>{{ tagTrans('natural', 'divide') }}</td>",
        "  </tr>",
        "</table>"
    ]
}
