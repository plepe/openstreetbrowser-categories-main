name:
  ca: Instal·lacions de Rem
  en: Paddling Amenities
  fr: Équipements de pagayage
  it: Equipaggiamento per la navigazione a remo
  pl: Udogodnienia związane z wiosłowaniem
  pt-br: Equipamentos
  tr: Kürek Tesisleri
type: overpass
query:
  '12': |-
    (
      node["canoe"~"^(put_in|egress|put_in;egress)$"];
      node["waterway"="access_point"];
      node["leisure"="slipway"];
      way["canoe"="portage"];
      way[highway][portage];
      nwr[shop~"^(boat)$"]["boat:type"~"^(.*;|)canoe|kayak|standup_paddleboard|dinghy|pedalboat(|;.*)$"];
      nwr[rental~"^(boat)$"]["boat:type"~"^(.*;|)canoe|kayak|standup_paddleboard|dinghy|pedalboat(|;.*)$"];
      nwr["canoe_rental"="yes"];
      nwr["kayak_rental"="yes"];
      nwr["standup_paddleboard_rental"="yes"];
      nwr["dinghy_rental"="yes"];
      nwr["pedalboat_rental"="yes"];
    )
feature:
  pre: |-
    {% if type == 'way' and (tags.canoe == 'portage' or attribute(tags, 'portage')) %}
      {% set key = 'portage' %}
      {% set value = 'portage' %}
    {% elseif type == 'node' and tags.waterway and tags.waterway == 'access_point' %}
      {% set key = 'waterway' %}
      {% set value = tags.waterway %}
    {% elseif tags.leisure %}
      {% set key = 'leisure' %}
      {% set value = tags.leisure %}
    {% elseif tags.shop %}
      {% set key = 'shop' %}
      {% set value = 'shop' %}
    {% elseif tags.rental or tags.canoe_rental or tags.kayak_rental or tags.standup_paddleboard_rental or tags.dingy_rental or tags.pedalboat_rental %}
      {% set key = 'shop' %}
      {% set value = 'rental' %}
    {% elseif type == 'node' and tags.canoe and tags.canoe in ['put_in','egress','put_in;egress'] %}
      {% set key = 'canoe' %}
      {% set value = tags.canoe %}
    {% endif %}

    {% set constIndex = (key ~ "=" ~ value) %}
    {% set item = const[constIndex] %}

    {% if tags.informal and tags.informal in ['yes','unknown'] %}
      {% set informal_value = tags.informal %}
    {% endif %}

    {% if tags.ice_skates and tags.ice_skates in ['no','private','discouraged','unknown'] %}
      {% set restricted_access_value = tags.ice_skates %}
    {% elseif tags.access and tags.access in ['no','private','discouraged','unknown'] %}
      {% set restricted_access_value = tags.access %}
    {% elseif  type == 'way' and tags.waterway and tags.waterway != 'access_point' and tags.ice_skates and tags.ice_skates == 'kluning' %}
      {% set restricted_access_value = tags.ice_skates %}
    {% endif %}
  title: |-
    {{ localizedTag(tags, 'name') }}
    {% if attribute(tags, 'ref') %}
      ( {{ localizedTag(tags, 'ref') }} )
    {% endif %}
  listDetails: |-
    {%if attribute(tags, 'waterbody:name')%}
      {{ localizedTag(tags, 'waterbody:name') }}
    {% endif %}
  description: |-
    {% if item.detailSign %}
      {{ item.detailSign | raw }}
    {% endif %}
    {{ tagTrans(key, value) }}
  body: |-
    {% if key not in ['shop'] %}
      <ul>
      {% if attribute(tags, 'waterbody:name') %}
      <li class='hasSymbol'>
        <i class="fas fa-water"></i>
        {{ tagTrans('natural', 'water') }}:
        <span class='value'>{{ localizedTag(tags, 'waterbody:name') }}</span>
      </li>
      {% endif %}

        {% if attribute(tags, 'surface') %}
        <li class='hasSymbol'>
          <i class='fa fa-window-minimize'></i>
          {{ keyTrans('Surface') }}:
          <span class='value'>{{ attribute(tags, 'surface') ? tagTrans('surface', attribute(tags, 'surface')) : '' }}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'operator') %}
        <li class='hasSymbol'>
          <i class='fa fa-drivers-license-o'></i>
          {{ keyTrans('operator') }}:
          <span class='value'>{{ tagTrans('operator', attribute(tags, 'operator')) }}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'informal') %}
        <li class='hasSymbol'>
          <i class='fa fa-unlock'></i>
          {{ keyTrans('informal') }}:
          <span class='value'>{{ tagTrans('informal', attribute(tags, 'informal'))}}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'access') %}
        <li class='hasSymbol'>
          <i class='fa fa-unlock'></i>
          {{ keyTrans('access') }}:
          <span class='value'>{{ tagTrans('access', attribute(tags, 'access'))}}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'canoe') and tags.canoe in ['yes','designated','permissive','permit','discouraged','private','no'] %}
        <li class='hasSymbol'>
          <i class='fa fa-unlock'></i>
          {{ keyTrans('canoe') }}:
          <span class='value'>{{ attribute(tags, 'canoe') ? tagTrans('access', attribute(tags, 'canoe')) : '' }}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'portage') and tags.portage in ['yes','designated','permissive','permit','discouraged','private','no'] %}
        <li class='hasSymbol'>
          <i class='fa fa-unlock'></i>
          {{ keyTrans('portage') }}:
          <span class='value'>{{ attribute(tags, 'portage') ? tagTrans('access', attribute(tags, 'portage')) : '' }}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'fee') %}
        <li class='hasSymbol'>
          <i class='fa fa-money'></i>
          {{ keyTrans('Fee') }}:
          <span class='value'>{{ attribute(tags, 'fee') ? tagTrans('fee', attribute(tags, 'fee')) : '' }}</span>
        </li>
        {% endif %}

        {% if attribute(tags, 'mapillary') %}
        <li class='hasSymbol'>
          <i class='fa fa-camera'></i>
          {{ trans('Photos') }}:
          <span class='value'>
            <a href="https://www.mapillary.com/app/?focus=photo&pKey={{ attribute(tags, 'mapillary') }}" rel="noreferrer" target="_blank">Mapillary</a>
          </span>
        </li>
        {% endif %}

      </ul>
    {% endif %}
  markerSign: '{{ item[''sign''] | raw }}'
  markerSymbol: |-
    {% if item.symbol=='pointer' %}
    {% if restricted_access_value %}
    {{ markerPointer({ fillColor: const.marker.style.color_restricted }) }}   
    {% elseif informal_value %}
    {{ markerPointer({ fillColor: const.marker.style.color_informal }) }}
    {% else %}
    {{ markerPointer({ fillColor: const.marker.style.color }) }}
    {% endif %}
    {% endif %}
  listMarkerSymbol: |-
    {% if item.symbol=='pointer' %}
      {% if restricted_access_value %}
        {{ markerCircle({ fillColor: const.marker.style.color_restricted }) }}   
      {% elseif informal_value %}
        {{ markerCircle({ fillColor: const.marker.style.color_informal }) }}
      {% else %}
        {{ markerCircle({ fillColor: const.marker.style.color }) }}
      {% endif %}
    {% elseif item.symbol == 'polygon' %}
      polygon
    {% elseif item.symbol == 'line' %}
      line
    {% endif %}
  styles : |
    default{% if item.symbol == 'line' %},casing{% endif %}
  style:
    width: '{{ item.style.width }}'
    color: |-
      {% if restricted_access_value %}
        {{ item.style.color_restricted }}
      {% elseif informal_value %}
        {{ item.style.color_informal }}
      {% else %}
        {{ item.style.color }}
      {% endif %}
  style:casing:     
    width: '{{item.style.casing.width}}'
    pane: casing 
  text: |-
    {% if item.text %}
      {% if attribute(tags, "piste:name") %}
        {{ localizedTag(tags, 'piste:name') }}  
      {% elseif attribute(tags, "name") %}
        {{ localizedTag(tags, 'name') }} 
      {% endif %}
    {% endif %}
  textRepeat: '1'
  lineCap: round
  dashArray: |-
    {% if restricted_access_value %}5,5{% endif %}
  priority: |-
    {% if item is defined %}
      {{ item['priority'] }}
    {% else %}
      10
    {% endif %}
const:
  marker:
    style:
      color: '#FFFFFF'
      color_informal: '#BFBFBF'
      color_restricted: '#7F7F7F'
  portage=portage:
    symbol: line
    priority: 2
    text: true
    style:
      width: 4
      color: '#B3D2FF'
      color_informal: '#99A9BF'
      color_restricted: '#7F7F7F'
      casing:
        width: 10
  waterway=access_point:
    symbol: pointer
    sign: <img data-src="temaki:canoe">
    detailSign: <i class="fas fa-arrows-alt-v"></i>
    priority: 0
  canoe=put_in:
    symbol: pointer
    sign: <img data-src="temaki:canoe">
    detailSign: <i class="fas fa-long-arrow-alt-down"></i>
    priority: 0
  canoe=egress:
    symbol: pointer
    sign: <img data-src="temaki:canoe">
    detailSign: <i class="fas fa-long-arrow-alt-up"></i>
    priority: 0
  canoe=put_in;egress:
    symbol: pointer
    sign: <img data-src="temaki:canoe">
    detailSign: <i class="fas fa-arrows-alt-v"></i>
    priority: 0
  leisure=slipway:
    symbol: pointer
    sign: <img data-src="temaki:canoe">
    detailSign: <img src='maki:slipway'>
    priority: 1
  shop=shop:
    symbol: pointer
    sign: <i class="fas fa-store-alt"></i>
    priority: 3
  shop=rental:
    sign: <i class="fas fa-store"></i>
    priority: 3
  